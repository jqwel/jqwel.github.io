(function(){"use strict";var __webpack_modules__={2777:function(e,t,n){var s=n(5130),r=n(6768);const o={class:"navbar navbar-expand-lg"},a={class:"container-fluid"},i={class:"collapse navbar-collapse",id:"navbarTools"},c={class:"navbar-nav me-auto mb-2 mb-lg-0"},l={class:"nav-item"},u={class:"nav-item"},_={class:"nav-item"},p={class:"nav-item"},d={class:"container mt-4"};var f={__name:"App",setup(e){return(0,r.sV)((()=>{const e=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.body.setAttribute("data-bs-theme",e)};e(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),(0,r.hi)((()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}))})),(e,t)=>{const n=(0,r.g2)("router-link"),s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("nav",o,[(0,r.Lk)("div",a,[(0,r.bF)(n,{class:"navbar-brand",to:"/"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("工具箱")]))),_:1}),t[5]||(t[5]=(0,r.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTools"},[(0,r.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,r.Lk)("div",i,[(0,r.Lk)("ul",c,[(0,r.Lk)("li",l,[(0,r.bF)(n,{class:"nav-link",to:"/json"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("JSON格式化")]))),_:1})]),(0,r.Lk)("li",u,[(0,r.bF)(n,{class:"nav-link",to:"/table2json"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("JSON表格")]))),_:1})]),(0,r.Lk)("li",_,[(0,r.bF)(n,{class:"nav-link",to:"/xlsx2csv"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("XLSX转CSV")]))),_:1})]),(0,r.Lk)("li",p,[(0,r.bF)(n,{class:"nav-link",to:"/go2json"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("GO转JSON")]))),_:1})])])])])]),(0,r.Lk)("div",d,[(0,r.bF)(s)])])}}};const h=f;var b=h,m=n(1387);function v(e,t,n,s,o,a){return(0,r.uX)(),(0,r.CE)("div",null,t[0]||(t[0]=[(0,r.Lk)("h1",null,"欢迎使用工具箱",-1),(0,r.Lk)("p",null,"请选择左边的工具进行操作。",-1)]))}var k={name:"HomePage"},g=n(1241);const y=(0,g.A)(k,[["render",v]]);var w=y;const x={class:"d-flex flex-wrap gap-2 mt-2"},j={ref:"copyBtn",class:"btn btn-success"};function L(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",null,[t[5]||(t[5]=(0,r.Lk)("h1",{class:"mb-3"},"JSON 格式化",-1)),(0,r.bo)((0,r.Lk)("textarea",{ref:"jsonArea","onUpdate:modelValue":t[0]||(t[0]=e=>a.jsonText=e),rows:"12",class:"form-control"},null,512),[[s.Jo,a.jsonText]]),(0,r.Lk)("div",x,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.formatJson&&i.formatJson(...e)),class:"btn btn-primary"},"Format"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.unformatJson&&i.unformatJson(...e)),class:"btn btn-info"},"Unformat"),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.beautifyJson&&i.beautifyJson(...e)),class:"btn btn-primary"},"Beautify"),(0,r.Lk)("button",j,"Copy",512),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.initData&&i.initData(...e)),class:"btn btn-primary"},"Init")])])}var S=n(4683);const C=(0,g.A)(S.A,[["render",L],["__scopeId","data-v-202ad8da"]]);var J=C;function O(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",null,[t[5]||(t[5]=(0,r.Lk)("h2",null,"Excel 转 CSV",-1)),(0,r.Lk)("div",{class:"dropzone",onClick:t[0]||(t[0]=(...e)=>i.triggerFile&&i.triggerFile(...e)),onDrop:t[1]||(t[1]=(0,s.D$)(((...e)=>i.onDrop&&i.onDrop(...e)),["prevent"])),onDragover:t[2]||(t[2]=(0,s.D$)((()=>{}),["prevent"]))}," 拖入或点击选择 Excel 文件 ",32),(0,r.Lk)("input",{ref:"fileInput",type:"file",accept:".xlsx,.xls",style:{display:"none"},onChange:t[3]||(t[3]=(...e)=>i.onFileChange&&i.onFileChange(...e))},null,544),a.csvContent?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>i.downloadCsv&&i.downloadCsv(...e)),class:"btn btn-primary"},"下载 CSV")):(0,r.Q3)("",!0)])}var T=n(3230),E={name:"Xlsx2Csv",data(){return{csvContent:""}},methods:{triggerFile(){this.$refs.fileInput.click()},onFileChange(e){const t=e.target.files[0];t&&/\.(xlsx|xls)$/.test(t.name)?this.readFile(t):alert("请上传 Excel 文件")},onDrop(e){const t=e.dataTransfer.files[0];t&&/\.(xlsx|xls)$/.test(t.name)?this.readFile(t):alert("请拖入有效的 Excel 文件")},readFile(e){const t=new FileReader;t.onload=e=>{const t=new Uint8Array(e.target.result),n=T.LF(t,{type:"array"}),s=n.Sheets[n.SheetNames[0]];this.csvContent=T.Wp.sheet_to_csv(s,{FS:",",strip:!0}),alert("转换成功")},t.readAsArrayBuffer(e)},downloadCsv(){const e=new Blob(["\ufeff"+this.csvContent],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="converted.csv",n.click(),URL.revokeObjectURL(t)}}};const I=(0,g.A)(E,[["render",O],["__scopeId","data-v-315f8ea4"]]);var A=I;const q={class:"container-fluid"},N={class:"row"},$={class:"col-6"},F={class:"col-6"};function M(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",q,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"mb-3"},"CSV ↔ JSON 实时转换",-1)),(0,r.Lk)("div",N,[(0,r.Lk)("div",$,[t[5]||(t[5]=(0,r.Lk)("label",{class:"form-label"},"CSV 输入",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.csvText=e),rows:"20",class:"form-control",onInput:t[1]||(t[1]=(...e)=>i.handleCsvInput&&i.handleCsvInput(...e))},null,544),[[s.Jo,a.csvText]]),(0,r.Lk)("button",{class:"btn btn-primary mt-2",onClick:t[2]||(t[2]=(...e)=>i.downloadCsv&&i.downloadCsv(...e))},"下载 CSV")]),(0,r.Lk)("div",F,[t[6]||(t[6]=(0,r.Lk)("label",{class:"form-label"},"JSON 输出",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.jsonText=e),rows:"20",class:"form-control",onInput:t[4]||(t[4]=(...e)=>i.handleJsonInput&&i.handleJsonInput(...e))},null,544),[[s.Jo,a.jsonText]])])])])}n(8111),n(7588),n(1701),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var U=n(8344),D=n.n(U),W={name:"CsvJsonConverter",data(){return{csvText:"name,age,active\n小王,25,true\n小李,30,false",jsonText:"",isSyncing:!1}},mounted(){this.handleCsvInput()},methods:{handleCsvInput(){if(!this.isSyncing){this.isSyncing=!0;try{const e=D().parse(this.csvText.trim(),{header:!0,skipEmptyLines:!0,dynamicTyping:!1}),t=e.data.map((e=>{const t={};for(const n in e){const s=e[n],r=s;if("true"===r)t[n]=!0;else if("false"===r)t[n]=!1;else{const e=Number(s);isNaN(e)||String(e)!==s?t[n]=s:t[n]=e}}return t}));this.jsonText=JSON.stringify(t,null,2)}catch(e){this.jsonText=`// CSV 转换失败：${e.message}`}finally{this.isSyncing=!1}}},handleJsonInput(){if(!this.isSyncing){this.isSyncing=!0;try{const e=JSON.parse(this.jsonText);if(!Array.isArray(e))throw new Error("JSON 必须是数组");const t=new Set;e.forEach((e=>{Object.keys(e).forEach((e=>t.add(e)))}));const n=e.map((e=>{const n={};return t.forEach((t=>{n[t]=t in e?e[t]:""})),n}));this.csvText=D().unparse(n)}catch(e){this.csvText=`// JSON 转换失败：${e.message}`}finally{this.isSyncing=!1}}},downloadCsv(){try{const e="\ufeff",t=new Blob([e+this.csvText],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download","data.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}catch(e){alert("下载失败："+e.message)}}}};const P=(0,g.A)(W,[["render",M],["__scopeId","data-v-0d542a9d"]]);var R=P;const B={class:"container-fluid"},V={class:"row"},K={class:"col-6"},G={class:"col-6"};function X(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",B,[t[6]||(t[6]=(0,r.Lk)("h2",{class:"mb-3"},"Go Struct ↔ JSON 转换",-1)),(0,r.Lk)("div",V,[(0,r.Lk)("div",K,[t[4]||(t[4]=(0,r.Lk)("label",{class:"form-label"},"Go Struct",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.goStruct=e),rows:"20",class:"form-control",onInput:t[1]||(t[1]=(...e)=>i.handleGoInput&&i.handleGoInput(...e))},null,544),[[s.Jo,a.goStruct]])]),(0,r.Lk)("div",G,[t[5]||(t[5]=(0,r.Lk)("label",{class:"form-label"},"JSON",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.jsonText=e),rows:"20",class:"form-control",onInput:t[3]||(t[3]=(...e)=>i.handleJsonInput&&i.handleJsonInput(...e))},null,544),[[s.Jo,a.jsonText]])])])])}n(4114),n(2489);var z={name:"GoJsonConverterRandom",data(){return{goStruct:'type User struct {\n  ID      int        `json:"id"`\n  Name    string     `json:"name"`\n  Active  bool       `json:"active"`\n  Profile *Profile   `json:"profile"`\n  Tags    []string   `json:"tags"`\n  Friends []Friend   `json:"friends"`\n}\n\ntype Profile struct {\n  Email   string `json:"email"`\n  Address string `json:"address"`\n}\n\ntype Friend struct {\n  Name string `json:"name"`\n  Age  int    `json:"age"`\n}',jsonText:"",isSyncing:!1}},mounted(){this.handleGoInput()},methods:{handleGoInput(){if(!this.isSyncing){this.isSyncing=!0;try{const e=this.parseStructs(this.goStruct),t=Object.keys(e)[0],n=this.generateJson(e,t);this.jsonText=JSON.stringify(n,null,2)}catch(e){this.jsonText=`// 解析失败：${e.message}`}finally{this.isSyncing=!1}}},parseStructs(e){const t={},n=/type\s+(\w+)\s+struct\s*{([^}]*)}/gs;let s;while(null!==(s=n.exec(e))){const[,e,n]=s,r=[],o=n.split("\n").map((e=>e.trim())).map((e=>e.split("//")[0].trim())).filter(Boolean);for(const t of o){let e=t.match(/^(\w+)\s+([^\s]+)\s+`json:"([^"]+)"`/);if(e)r.push({name:e[1],type:e[2],jsonKey:e[3]});else if(e=t.match(/^(\w+)\s+([^\s`]+)$/),e){const t=e[1];r.push({name:t,type:e[2],jsonKey:t})}}t[e]=r}return t},generateJson(e,t){const n=(e="")=>{if(/url$|uri$|link$/i.test(e)){const e=["example.com","test.io","my.site"],t=["foo","bar","image","profile"],n=e[Math.floor(Math.random()*e.length)],s=t[Math.floor(Math.random()*t.length)];return`https://${n}/${s}`}return["foo","bar","baz","golang","hello"][Math.floor(5*Math.random())]},s=()=>Math.floor(100*Math.random()),r=()=>Math.random()>.5,o=(t,o)=>{const a=o.startsWith("[]"),i=o.startsWith("*"),c=a?o.slice(2):i?o.slice(1):o;let l;switch(c){case"string":l=n(t);break;case"int":case"int64":case"float64":l=s();break;case"bool":l=r();break;default:l=this.generateJson(e,c)}return a?[l,l]:l},a={},i=e[t];if(!i)throw new Error(`未定义结构体: ${t}`);for(const{jsonKey:c,type:l}of i)a[c]=o(c,l);return a},handleJsonInput(){if(!this.isSyncing){this.isSyncing=!0;try{const e=JSON.parse(this.jsonText),t=this.generateGoStructFromJson(e);this.goStruct=t}catch(e){this.goStruct=`// JSON 转换失败：${e.message}`}finally{this.isSyncing=!1}}},generateGoStructFromJson(e,t="AutoGenerated"){const n=e=>e.replace(/[_-](\w)/g,((e,t)=>t.toUpperCase())).replace(/^(\w)/,((e,t)=>t.toUpperCase())),s=e=>{if(Array.isArray(e)){if(0===e.length)return"[]interface{}";const t=s(e[0]);return`[]${t}`}return null===e?"interface{}":"string"===typeof e?"string":"number"===typeof e?Number.isInteger(e)?"int":"float64":"boolean"===typeof e?"bool":"object"===typeof e?"struct":"interface{}"},r={},o=(e,t)=>{if(r[t])return;const a=[];for(const r in e){const t=e[r],i=n(r);let c=s(t);if("struct"===c){const e=n(r);o(t,e),c=e}if(c.startsWith("[]")&&"struct"===c.slice(2)){const e=n(r);o(t[0],e),c=`[]${e}`}a.push({goKey:i,typ:c,jsonKey:r})}r[t]=a};o(e,t);const a=Object.entries(r).reverse(),i=a.map((([e,t])=>{const n=Math.max(...t.map((e=>e.goKey.length))),s=Math.max(...t.map((e=>e.typ.length))),r=t.map((e=>{const t=(e,t)=>e+" ".repeat(t-e.length);return`  ${t(e.goKey,n)} ${t(e.typ,s)} \`json:"${e.jsonKey}"\``}));return`type ${e} struct {\n${r.join("\n")}\n}`}));return i.join("\n\n")}}};const H=(0,g.A)(z,[["render",X],["__scopeId","data-v-2d2fa181"]]);var Q=H;const Y=[{path:"/home",component:w},{path:"/",redirect:"/json"},{path:"/json",component:J},{path:"/table2json",component:R},{path:"/xlsx2csv",component:A},{path:"/go2json",component:Q}],Z=(0,m.aE)({history:(0,m.Bt)(),routes:Y});var ee=Z;n(323);(0,s.Ef)(b).use(ee).mount("#app")},4683:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var clipboard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3723),clipboard__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(clipboard__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.A={name:"JsonTool",data(){return{jsonText:"{}",beautified:!1,beautified_raw:""}},mounted(){this.initData(),this.clipboard=new(clipboard__WEBPACK_IMPORTED_MODULE_0___default())(this.$refs.copyBtn,{text:()=>this.$refs.jsonArea.value}),this.clipboard.on("success",(()=>{this.$refs.jsonArea.select()}))},methods:{initData(){this.jsonText='{\n  "ABC":123, 张三:"a~b~c",  \n  a:`10`,\'b\':20, "c":"30","d":true,  \n  e:`10.\\n20`,f:60.0, g:10+"33"  \n}',this.beautified=!1,this.beautified_raw=""},formatJson(){this.beautified&&(this.beautified=!1,this.jsonText=this.beautified_raw);try{const obj=eval("("+this.jsonText+")");this.jsonText=JSON.stringify(obj,null,2)}catch(err){return console.error(err.message),err}},unformatJson(){try{const e=this.formatJson();if(e)throw e;const t=JSON.parse(this.jsonText);this.jsonText=JSON.stringify(t)}catch(e){return console.error(e.message),e}},parseWithNewlines(e){return e.replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t")},beautifyJson(){try{if(this.beautified)return;const e=this.formatJson();if(e)throw e;this.beautified=!0,this.beautified_raw=this.jsonText;const t=this.jsonText,n=this.parseWithNewlines(t);this.jsonText=n}catch(e){return console.error(e.message),e}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,n,s,r){if(!n){var o=1/0;for(l=0;l<e.length;l++){n=e[l][0],s=e[l][1],r=e[l][2];for(var a=!0,i=0;i<n.length;i++)(!1&r||o>=r)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[i])}))?n.splice(i--,1):(a=!1,r<o&&(o=r));if(a){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,s,r]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,o=n[0],a=n[1],i=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in a)__webpack_require__.o(a,s)&&(__webpack_require__.m[s]=a[s]);if(i)var l=i(__webpack_require__)}for(t&&t(n);c<o.length;c++)r=o[c],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(l)},n=self["webpackChunkjqwel_github_io"]=self["webpackChunkjqwel_github_io"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[504],(function(){return __webpack_require__(2777)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.f89720e3.js.map