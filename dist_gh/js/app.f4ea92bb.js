(function(){"use strict";var t={8075:function(t,n,e){var s=e(5130),o=e(6768);const r={class:"navbar navbar-expand-lg"},a={class:"container-fluid"},i={class:"collapse navbar-collapse",id:"navbarTools"},c={class:"navbar-nav me-auto mb-2 mb-lg-0"},l={class:"nav-item"},u={class:"nav-item"},d={class:"nav-item"},f={class:"nav-item"},h={class:"container mt-4"};var p={__name:"App",setup(t){return(0,o.sV)((()=>{const t=()=>{const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.body.setAttribute("data-bs-theme",t)};t(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t),(0,o.hi)((()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",t)}))})),(t,n)=>{const e=(0,o.g2)("router-link"),s=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("nav",r,[(0,o.Lk)("div",a,[(0,o.bF)(e,{class:"navbar-brand",to:"/"},{default:(0,o.k6)((()=>n[0]||(n[0]=[(0,o.eW)("工具箱")]))),_:1}),n[5]||(n[5]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTools"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",i,[(0,o.Lk)("ul",c,[(0,o.Lk)("li",l,[(0,o.bF)(e,{class:"nav-link",to:"/json"},{default:(0,o.k6)((()=>n[1]||(n[1]=[(0,o.eW)("JSON 格式化")]))),_:1})]),(0,o.Lk)("li",u,[(0,o.bF)(e,{class:"nav-link",to:"/table2json"},{default:(0,o.k6)((()=>n[2]||(n[2]=[(0,o.eW)("JSON表格")]))),_:1})]),(0,o.Lk)("li",d,[(0,o.bF)(e,{class:"nav-link",to:"/xlsx2csv"},{default:(0,o.k6)((()=>n[3]||(n[3]=[(0,o.eW)("XLSX 转 CSV")]))),_:1})]),(0,o.Lk)("li",f,[(0,o.bF)(e,{class:"nav-link",to:"/go2json"},{default:(0,o.k6)((()=>n[4]||(n[4]=[(0,o.eW)("GO 转 JSON")]))),_:1})])])])])]),(0,o.Lk)("div",h,[(0,o.bF)(s)])])}}};const m=p;var v=m,g=e(1387);function b(t,n,e,s,r,a){return(0,o.uX)(),(0,o.CE)("div",null,n[0]||(n[0]=[(0,o.Lk)("h1",null,"欢迎使用工具箱",-1),(0,o.Lk)("p",null,"请选择左边的工具进行操作。",-1)]))}var y={name:"HomePage"},k=e(1241);const j=(0,k.A)(y,[["render",b]]);var x=j;const S={class:"d-flex gap-2 mt-2"},L={ref:"copyBtn",class:"btn btn-success"};function w(t,n,e,r,a,i){return(0,o.uX)(),(0,o.CE)("div",null,[n[3]||(n[3]=(0,o.Lk)("h1",{class:"mb-3"},"JSON 格式化",-1)),(0,o.bo)((0,o.Lk)("textarea",{ref:"jsonArea","onUpdate:modelValue":n[0]||(n[0]=t=>a.jsonText=t),rows:"12",class:"form-control"},null,512),[[s.Jo,a.jsonText]]),(0,o.Lk)("div",S,[(0,o.Lk)("button",{onClick:n[1]||(n[1]=(...t)=>i.formatJson&&i.formatJson(...t)),class:"btn btn-primary"},"Format"),(0,o.Lk)("button",{onClick:n[2]||(n[2]=(...t)=>i.unformatJson&&i.unformatJson(...t)),class:"btn btn-info"},"Unformat"),(0,o.Lk)("button",L,"Copy",512)])])}var C=e(3723),J=e.n(C),O={name:"JsonTool",data(){return{jsonText:'{"ABC":123,"a":10,"b":20,"c":"30","d":40,"e":50,"f":60,"g":70,"h":80,"i":90,"j":100,"k":110,"l":120,"m":130,"n":140}'}},mounted(){this.clipboard=new(J())(this.$refs.copyBtn,{text:()=>this.$refs.jsonArea.value}),this.clipboard.on("success",(()=>{this.$refs.jsonArea.select()}))},methods:{formatJson(){try{const t=this.jsonText.replace(/([{,])\s*([a-zA-Z0-9_]+)\s*:/g,'$1"$2":'),n=JSON.parse(t);this.jsonText=JSON.stringify(n,null,2),this.$refs.jsonArea.select()}catch(t){}},unformatJson(){try{this.formatJson();const t=JSON.parse(this.jsonText);this.jsonText=JSON.stringify(t),this.$refs.jsonArea.select()}catch(t){}}}};const T=(0,k.A)(O,[["render",w],["__scopeId","data-v-b0a7e23a"]]);var $=T;function A(t,n,e,r,a,i){return(0,o.uX)(),(0,o.CE)("div",null,[n[5]||(n[5]=(0,o.Lk)("h2",null,"Excel 转 CSV",-1)),(0,o.Lk)("div",{class:"dropzone",onClick:n[0]||(n[0]=(...t)=>i.triggerFile&&i.triggerFile(...t)),onDrop:n[1]||(n[1]=(0,s.D$)(((...t)=>i.onDrop&&i.onDrop(...t)),["prevent"])),onDragover:n[2]||(n[2]=(0,s.D$)((()=>{}),["prevent"]))}," 拖入或点击选择 Excel 文件 ",32),(0,o.Lk)("input",{ref:"fileInput",type:"file",accept:".xlsx,.xls",style:{display:"none"},onChange:n[3]||(n[3]=(...t)=>i.onFileChange&&i.onFileChange(...t))},null,544),a.csvContent?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:n[4]||(n[4]=(...t)=>i.downloadCsv&&i.downloadCsv(...t)),class:"btn btn-primary"},"下载 CSV")):(0,o.Q3)("",!0)])}var I=e(3230),N={name:"Xlsx2Csv",data(){return{csvContent:""}},methods:{triggerFile(){this.$refs.fileInput.click()},onFileChange(t){const n=t.target.files[0];n&&/\.(xlsx|xls)$/.test(n.name)?this.readFile(n):alert("请上传 Excel 文件")},onDrop(t){const n=t.dataTransfer.files[0];n&&/\.(xlsx|xls)$/.test(n.name)?this.readFile(n):alert("请拖入有效的 Excel 文件")},readFile(t){const n=new FileReader;n.onload=t=>{const n=new Uint8Array(t.target.result),e=I.LF(n,{type:"array"}),s=e.Sheets[e.SheetNames[0]];this.csvContent=I.Wp.sheet_to_csv(s,{FS:",",strip:!0}),alert("转换成功")},n.readAsArrayBuffer(t)},downloadCsv(){const t=new Blob(["\ufeff"+this.csvContent],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),e=document.createElement("a");e.href=n,e.download="converted.csv",e.click(),URL.revokeObjectURL(n)}}};const E=(0,k.A)(N,[["render",A],["__scopeId","data-v-315f8ea4"]]);var F=E;const _={class:"container-fluid"},U={class:"row"},M={class:"col-6"},V={class:"col-6"};function G(t,n,e,r,a,i){return(0,o.uX)(),(0,o.CE)("div",_,[n[7]||(n[7]=(0,o.Lk)("h2",{class:"mb-3"},"CSV ↔ JSON 实时转换",-1)),(0,o.Lk)("div",U,[(0,o.Lk)("div",M,[n[5]||(n[5]=(0,o.Lk)("label",{class:"form-label"},"CSV 输入",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":n[0]||(n[0]=t=>a.csvText=t),rows:"20",class:"form-control",onInput:n[1]||(n[1]=(...t)=>i.handleCsvInput&&i.handleCsvInput(...t))},null,544),[[s.Jo,a.csvText]]),(0,o.Lk)("button",{class:"btn btn-primary mt-2",onClick:n[2]||(n[2]=(...t)=>i.downloadCsv&&i.downloadCsv(...t))},"下载 CSV")]),(0,o.Lk)("div",V,[n[6]||(n[6]=(0,o.Lk)("label",{class:"form-label"},"JSON 输出",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":n[3]||(n[3]=t=>a.jsonText=t),rows:"20",class:"form-control",onInput:n[4]||(n[4]=(...t)=>i.handleJsonInput&&i.handleJsonInput(...t))},null,544),[[s.Jo,a.jsonText]])])])])}e(8111),e(7588),e(1701),e(7642),e(8004),e(3853),e(5876),e(2475),e(5024),e(1698);var R=e(8344),X=e.n(R),W={name:"CsvJsonConverter",data(){return{csvText:"name,age,active\n小王,25,true\n小李,30,false",jsonText:"",isSyncing:!1}},mounted(){this.handleCsvInput()},methods:{handleCsvInput(){if(!this.isSyncing){this.isSyncing=!0;try{const t=X().parse(this.csvText.trim(),{header:!0,skipEmptyLines:!0,dynamicTyping:!1}),n=t.data.map((t=>{const n={};for(const e in t){const s=t[e],o=s;if("true"===o)n[e]=!0;else if("false"===o)n[e]=!1;else{const t=Number(s);isNaN(t)||String(t)!==s?n[e]=s:n[e]=t}}return n}));this.jsonText=JSON.stringify(n,null,2)}catch(t){this.jsonText=`// CSV 转换失败：${t.message}`}finally{this.isSyncing=!1}}},handleJsonInput(){if(!this.isSyncing){this.isSyncing=!0;try{const t=JSON.parse(this.jsonText);if(!Array.isArray(t))throw new Error("JSON 必须是数组");const n=new Set;t.forEach((t=>{Object.keys(t).forEach((t=>n.add(t)))}));const e=t.map((t=>{const e={};return n.forEach((n=>{e[n]=n in t?t[n]:""})),e}));this.csvText=X().unparse(e)}catch(t){this.csvText=`// JSON 转换失败：${t.message}`}finally{this.isSyncing=!1}}},downloadCsv(){try{const t="\ufeff",n=new Blob([t+this.csvText],{type:"text/csv;charset=utf-8;"}),e=URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download","data.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}catch(t){alert("下载失败："+t.message)}}}};const B=(0,k.A)(W,[["render",G],["__scopeId","data-v-0d542a9d"]]);var D=B;const K={class:"container-fluid"},P={class:"row"},z={class:"col-6"},q={class:"col-6"};function H(t,n,e,r,a,i){return(0,o.uX)(),(0,o.CE)("div",K,[n[6]||(n[6]=(0,o.Lk)("h2",{class:"mb-3"},"Go Struct ↔ JSON 转换",-1)),(0,o.Lk)("div",P,[(0,o.Lk)("div",z,[n[4]||(n[4]=(0,o.Lk)("label",{class:"form-label"},"Go Struct",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":n[0]||(n[0]=t=>a.goStruct=t),rows:"20",class:"form-control",onInput:n[1]||(n[1]=(...t)=>i.handleGoInput&&i.handleGoInput(...t))},null,544),[[s.Jo,a.goStruct]])]),(0,o.Lk)("div",q,[n[5]||(n[5]=(0,o.Lk)("label",{class:"form-label"},"JSON",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":n[2]||(n[2]=t=>a.jsonText=t),rows:"20",class:"form-control",onInput:n[3]||(n[3]=(...t)=>i.handleJsonInput&&i.handleJsonInput(...t))},null,544),[[s.Jo,a.jsonText]])])])])}e(4114),e(2489);var Q={name:"GoJsonConverterRandom",data(){return{goStruct:'type User struct {\n  ID      int        `json:"id"`\n  Name    string     `json:"name"`\n  Active  bool       `json:"active"`\n  Profile *Profile   `json:"profile"`\n  Tags    []string   `json:"tags"`\n  Friends []Friend   `json:"friends"`\n}\n\ntype Profile struct {\n  Email   string `json:"email"`\n  Address string `json:"address"`\n}\n\ntype Friend struct {\n  Name string `json:"name"`\n  Age  int    `json:"age"`\n}',jsonText:"",isSyncing:!1}},mounted(){this.handleGoInput()},methods:{handleGoInput(){if(!this.isSyncing){this.isSyncing=!0;try{const t=this.parseStructs(this.goStruct),n=Object.keys(t)[0],e=this.generateJson(t,n);this.jsonText=JSON.stringify(e,null,2)}catch(t){this.jsonText=`// 解析失败：${t.message}`}finally{this.isSyncing=!1}}},parseStructs(t){const n={},e=/type\s+(\w+)\s+struct\s*{([^}]*)}/gs;let s;while(null!==(s=e.exec(t))){const[,t,e]=s,o=[],r=e.split("\n").map((t=>t.trim())).map((t=>t.split("//")[0].trim())).filter(Boolean);for(const n of r){let t=n.match(/^(\w+)\s+([^\s]+)\s+`json:"([^"]+)"`/);if(t)o.push({name:t[1],type:t[2],jsonKey:t[3]});else if(t=n.match(/^(\w+)\s+([^\s`]+)$/),t){const n=t[1];o.push({name:n,type:t[2],jsonKey:n})}}n[t]=o}return n},generateJson(t,n){const e=(t="")=>{if(/url$|uri$|link$/i.test(t)){const t=["example.com","test.io","my.site"],n=["foo","bar","image","profile"],e=t[Math.floor(Math.random()*t.length)],s=n[Math.floor(Math.random()*n.length)];return`https://${e}/${s}`}return["foo","bar","baz","golang","hello"][Math.floor(5*Math.random())]},s=()=>Math.floor(100*Math.random()),o=()=>Math.random()>.5,r=(n,r)=>{const a=r.startsWith("[]"),i=r.startsWith("*"),c=a?r.slice(2):i?r.slice(1):r;let l;switch(c){case"string":l=e(n);break;case"int":case"int64":case"float64":l=s();break;case"bool":l=o();break;default:l=this.generateJson(t,c)}return a?[l,l]:l},a={},i=t[n];if(!i)throw new Error(`未定义结构体: ${n}`);for(const{jsonKey:c,type:l}of i)a[c]=r(c,l);return a},handleJsonInput(){if(!this.isSyncing){this.isSyncing=!0;try{const t=JSON.parse(this.jsonText),n=this.generateGoStructFromJson(t);this.goStruct=n}catch(t){this.goStruct=`// JSON 转换失败：${t.message}`}finally{this.isSyncing=!1}}},generateGoStructFromJson(t,n="AutoGenerated"){const e=t=>t.replace(/[_-](\w)/g,((t,n)=>n.toUpperCase())).replace(/^(\w)/,((t,n)=>n.toUpperCase())),s=t=>{if(Array.isArray(t)){if(0===t.length)return"[]interface{}";const n=s(t[0]);return`[]${n}`}return null===t?"interface{}":"string"===typeof t?"string":"number"===typeof t?Number.isInteger(t)?"int":"float64":"boolean"===typeof t?"bool":"object"===typeof t?"struct":"interface{}"},o={},r=(t,n)=>{if(o[n])return;const a=[];for(const o in t){const n=t[o],i=e(o);let c=s(n);if("struct"===c){const t=e(o);r(n,t),c=t}if(c.startsWith("[]")&&"struct"===c.slice(2)){const t=e(o);r(n[0],t),c=`[]${t}`}a.push({goKey:i,typ:c,jsonKey:o})}o[n]=a};r(t,n);const a=Object.entries(o).reverse(),i=a.map((([t,n])=>{const e=Math.max(...n.map((t=>t.goKey.length))),s=Math.max(...n.map((t=>t.typ.length))),o=n.map((t=>{const n=(t,n)=>t+" ".repeat(n-t.length);return`  ${n(t.goKey,e)} ${n(t.typ,s)} \`json:"${t.jsonKey}"\``}));return`type ${t} struct {\n${o.join("\n")}\n}`}));return i.join("\n\n")}}};const Z=(0,k.A)(Q,[["render",H],["__scopeId","data-v-2d2fa181"]]);var Y=Z;const tt=[{path:"/home",component:x},{path:"/",redirect:"/json"},{path:"/json",component:$},{path:"/table2json",component:D},{path:"/xlsx2csv",component:F},{path:"/go2json",component:Y}],nt=(0,g.aE)({history:(0,g.Bt)(),routes:tt});var et=nt;e(323);(0,s.Ef)(v).use(et).mount("#app")}},n={};function e(s){var o=n[s];if(void 0!==o)return o.exports;var r=n[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(n,s,o,r){if(!s){var a=1/0;for(u=0;u<t.length;u++){s=t[u][0],o=t[u][1],r=t[u][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(e.O).every((function(t){return e.O[t](s[c])}))?s.splice(c--,1):(i=!1,r<a&&(a=r));if(i){t.splice(u--,1);var l=o();void 0!==l&&(n=l)}}return n}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[s,o,r]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,s){var o,r,a=s[0],i=s[1],c=s[2],l=0;if(a.some((function(n){return 0!==t[n]}))){for(o in i)e.o(i,o)&&(e.m[o]=i[o]);if(c)var u=c(e)}for(n&&n(s);l<a.length;l++)r=a[l],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(u)},s=self["webpackChunkjqwel_github_io"]=self["webpackChunkjqwel_github_io"]||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(8075)}));s=e.O(s)})();
//# sourceMappingURL=app.f4ea92bb.js.map